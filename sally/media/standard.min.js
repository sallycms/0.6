var sally=true,pageloaded=false;(function(f,d){f.noConflict();var b=["png","gif","jpg","jpeg","bmp"],i=[],c="REX_MEDIALIST_",h="REX_MEDIALIST_SELECT_",e="REX_LINKLIST_",k="REX_LINKLIST_SELECT_",a=",status=yes,resizable=yes",g=function(m,l){if(m===d){m=""}if(l===d){l="mediapool"}return"index.php?page="+l+"&opener_input_field="+m},j=function(l){var m="disabled",n=f(l+"_all").is(":checked");f(l).attr(m,n?m:"");return n};changeImage=function(m,l){f("#"+m).attr("src",l)};makeWinObj=function(p,o,n,s,q,m,l){if(l=="toolbar"){l="scrollbars=yes,toolbar=yes"}else{if(l=="empty"){l="scrollbars=no,toolbar=no"}else{l="scrollbars=yes,toolbar=no"+l}}var r=window.open(o,p,"width="+q+",height="+m+","+l);r.moveTo(n,s);r.focus();this.name=p;this.url=o;this.obj=r};closeAll=function(){var l=i.length,m=0;for(;m<l;++m){i[m].obj.close()}};newWindow=function(o,r,q,n,p){if(q==0){q=550}if(n==0){n=400}var m=p,s=parseInt(screen.width/2,10),l=parseInt(screen.height/2,10);if(p=="scrollbars"){m="toolbar"}else{if(p=="empty"){m="empty"}}if(p=="nav"){posx=s-390;posy=l-314;q=320;n=580}else{if(p=="content"){posx=s-60;posy=l-314;q=470;n=580}else{posx=parseInt((screen.width-q)/2);posy=parseInt((screen.height-n)/2)-24}}i.push(new makeWinObj(o,r,posx,posy,q,n,m))};newPoolWindow=function(l){newWindow("rexmediapopup",l,760,600,a)};newLinkMapWindow=function(l){newWindow("linkmappopup",l,760,600,a)};openMediaDetails=function(n,m,l){newPoolWindow(g(n)+"&subpage=detail&file_id="+m+"&file_category_id="+l)};openMediaPool=function(l){newPoolWindow(g(l))};openREXMedia=function(o,n){var l="REX_MEDIA_"+o,m=f("#"+l).val();if(n===d){n=""}if(m){n+="&subpage=detail&file_name="+m}newPoolWindow(g(l)+n)};deleteREXMedia=function(l){f("#REX_MEDIA_"+l).val("")};addREXMedia=function(m,l){if(l===d){l=""}newPoolWindow(g("REX_MEDIA_"+m)+"&action=media_upload&subpage=add_file"+l)};openLinkMap=function(m,l){if(l===d){l=""}newLinkMapWindow(g(m,"linkmap")+l)};setValue=function(m,l){f("#"+m).val(l)};setAllCheckBoxes=function(m,l){f("input[name="+m+"]").attr("checked",l.checked?"checked":"")};deleteREXLink=function(l){f("LINK_"+l).val("");f("LINK_"+l+"_NAME").val("")};openREXMedialist=function(o){var m=c+o,l=f("#"+h+o+" option:selected"),n="";if(l.length>0){n="&action=media_details&file_name="+l.val()}newPoolWindow(g(m)+n)};addREXMedialist=function(m,l){if(l===d){l=""}newPoolWindow(g(c+m)+"&action=media_upload&subpage=add_file"+l)};deleteREXMedialist=function(l){deleteREX(l,c,h)};moveREXMedialist=function(m,l){moveREX(m,c,h,l)};writeREXMedialist=function(l){writeREX(l,c,h)};openREXLinklist=function(o,n){var m=e+o,l=f("#"+k+o+" option:selected");if(l.length>0){n="&action=link_details&file_name="+l.val()}else{if(n===undefined){n=""}}newLinkMapWindow(g(m,"linkmap")+n)};deleteREXLinklist=function(l){deleteREX(l,e,k)};moveREXLinklist=function(m,l){moveREX(m,e,k,l)};writeREXLinklist=function(l){writeREX(l,e,k)};deleteREX=function(q,m,p){var n=f("#"+p+q),o=0,l=f("option:selected",n).index();if(l!=-1){f("option:eq("+l+")",n).remove();o=f("option",n).length;if(o>=1){if(o<=l){l--}f("#"+p+q+" option:eq("+l+")").attr("selected","selected");writeREX(q,m,p)}}};moveREX=function(q,l,p,o){var n=f("#"+p+q),m=f("option:selected",n);if(m.length){if(o=="top"){n.prepend(m)}else{if(o=="up"){f(m).prev().insertAfter(m)}else{if(o=="down"){f(m).next().insertBefore(m)}else{if(o=="bottom"){n.append(m)}}}}writeREX(q,l,p)}};writeREX=function(s,n,m){var l=f("#"+n+s),o=f("#"+m+s+" option"),q=o.length,p=0,r=[];for(;p<q;++p){r.push(o[p].text)}l.val(r.join(","))};moveItem=function(l,p,o){if(p==o||o<0){return l}var n=l[p],m=p;if(p>o){for(;m>o;m--){l[m]=l[m-1]}}else{for(;m<o;m++){l[m]=l[m+1]}}l[o]=n;return l};checkInput=function(l){f("#"+l).attr("checked","checked")};rexShowMediaPreview=function(){var n="",o=f(".rex-media-preview",this),m="",l=null;if(f(this).hasClass("rex-widget-media")){n=f("input[type=text]",this).val()}else{n=f("select option:selected",this).text()}m="../index.php?rex_resize=246a__"+n;if(n&&n.length!=0&&f.inArray(extension,b)){l=f("img",o);if(l.length==0){o.html("<img />");l=f("img",o)}l.attr("src",m);if(o.css("height")=="auto"){o.fadeIn("normal")}}else{o.slideUp("fast")}};sly_disableLogin=function(m){var l=parseInt(m.html(),10)-1;m.html(l+"");if(l>0){setTimeout(sly_disableLogin,1000,m)}else{f("div.rex-message p span").html(f("#login_message").text());f("#loginformular input:not(:hidden)").attr("disabled","");f("#rex-form-login").focus()}};sly_startLoginTimer=function(){var l=f("div.rex-message p span strong"),m="disabled";if(l.length==1){f("#loginformular input:not(:hidden)").attr(m,m);setTimeout(sly_disableLogin,1000,l)}};sly_catsChecked=function(){var m=j("#userperm_cat"),n=j("#userperm_media"),l=f("#cats_mcats_perms"),o="slow";if(m&&n){l.slideUp(o)}else{l.slideDown(o)}};f(function(){pageloaded=true;var r=f("#rex-form-mediapool-media"),m=f("#media_method"),p="disabled",q=":checked",u=".rex-widget-preview",t=".rex-widget-medialist"+u,w=".rex-widget-media"+u,v=f("#rex-form-login"),o=f("#rex-page-user"),s=f("#is_admin",o),l=f("#userperm_cat_all",o),n=f("#userperm_media_all",o);f(".sly-button-delete",r).click(function(){if(confirm(f(this).attr("rel")+"?")){m.val("delete_selectedmedia")}else{return false}});f(".sly-button-changecat",r).click(function(){m.val("updatecat_selectedmedia")});f("table.rex-table").delegate("a.sly-delete","click",function(){var x=f(this).parents("table").attr("rel")||"LÃ¶schen?";return confirm(x)});f("a.sly-blank").attr("target","_blank");f(t).click(rexShowMediaPreview);f(w+","+t).bind("mousemove",rexShowMediaPreview).bind("mouseleave",function(){var x=f(".rex-media-preview",this);if(x.css("height")!="auto"){x.slideUp("normal")}});f("#rex-navi-page-mediapool a").click(function(){newPoolWindow("index.php?page=mediapool");return false});if(v.length>0){v.focus();f("#javascript").val("1")}if(f("#rex-page-user #rex-form-user-editmode")){s.click(function(){if(this.checked){f("#userperm-module").attr(p,p);f("#cats_mcats_perms").slideUp("slow");f("#cats_mcats_box").slideUp("slow")}else{f("#userperm-module").attr(p,"");f("#cats_mcats_box").slideDown("slow");sly_catsChecked()}});l.click(sly_catsChecked);n.click(sly_catsChecked);if(s.is(q)){f("#userperm-module").attr(p,p);f("#cats_mcats_perms").hide();f("#cats_mcats_box").hide()}if(l.length==1&&l[0].checked&&n[0].checked){f("#cats_mcats_perms").hide()}}})})(jQuery);