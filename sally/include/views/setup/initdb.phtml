<?php
/*
 * Copyright (c) 2010, webvariants GbR, http://www.webvariants.de
 *
 * This file is released under the terms of the MIT license. You can find the
 * complete text in the attached LICENSE file or online at:
 *
 * http://www.opensource.org/licenses/mit-license.php
 */

global $I18N;

$this->title($I18N->msg('setup_step3'));

// init page

if (!empty($this->warning)) {
	print rex_warning($this->warning.'<br />'.$I18N->msg('setup_033'));
}

if (!in_array($dbInitFunction, $dbInitFunctions)) {
	$dbInitFunction = 'setup';
}

// create form

$form = new sly_Form('index.php', 'POST', t('setup_030_headline'), '', 'sly-setup-initdb');
$this->printHiddens('initdb', $form);

// create radios for possible init functions

$inputs['setup'] = new sly_Form_Input_Radio('db_init_function', '', 'setup', $I18N->msg('setup_034'), 'func_setup');
$inputs['drop']  = new sly_Form_Input_Radio('db_init_function', '', 'drop', $I18N->msg('setup_035'), 'func_drop');
$inputs['nop']   = new sly_Form_Input_Radio('db_init_function', '', 'nop', $I18N->msg('setup_036'), 'func_nop');

$inputs['drop']->setHelpText('Vorsicht - Alte Seite wird komplett gelÃ¶scht!');
$inputs[$dbInitFunction]->setChecked(true);

$inputs = sly_Core::dispatcher()->filter('SLY_SETUP_INIT_FUNCTIONS_FORM', $inputs);
$form->addElements($inputs);

// button config

$form->setResetButton(null);
$form->getSubmitButton()->setAttribute('value', t('setup_039'));

// render it!

$form->render();
