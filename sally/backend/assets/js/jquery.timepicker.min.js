(function(a){a.fn.datetime=function(d){var c=d.userLang||"en";var f=!(d.americanMode||false);var e="hasDateTime";var b=d.dateFormat;return this.each(function(){function i(q,n){var o=a("#pickerplug");if(n=="time"){o.data("lasttime",q+":00")}else{o.data("lastdate",q)}a(o.data("inputfield")).val(o.data("lastdate")+" "+o.data("lasttime"))}var m={changeMonth:true,changeYear:true,dateFormat:b,showButtonPanel:true,onSelect:i};var j={};j.en={time:"Time",hour:"Hour",minute:"Minute",close:"Close"};j.de={time:"Zeit",hour:"Stunde",minute:"Minute",close:"SchlieÃŸen"};a(this).data("sets",m).data("userLang",c).data("b24Hour",f);function l(o,q){var r="";switch(q){case"hour":var n=parseInt(o,10);if(!a("#pickerplug").data("b24Hour")&&n>11){n-=12;a(".dayPeriod").text("pm")}else{if(!a("#pickerplug").data("b24Hour")){a(".dayPeriod").text("am")}}if(n<10){n="0".concat(n)}if(o<10){o="0".concat(parseInt(o,10))}a("#tpSelectedTime .selHrs").text(n);r=o+":"+a("#tpSelectedTime .selMins").text();break;case"minute":var p=((o<10)?"0":"")+parseInt(o,10);a("#tpSelectedTime .selMins").text(p);r=a("#hourSlider").slider("option","value")+":"+p;break}return r}function h(q){var p=(a(q).val()||a(this).val()).split(" ");var o=null;if(p.length>=2){o=p.slice(0,-1).join(" ");p=p.pop()}else{o=p[0];p="00:00:00"}a("#pickerplug").data("lastdate",o).data("lasttime",p);p=p.split(":");if(p.length<2){p.push("00")}var n=p[0]||"00";var r=p[1]||"00";l(n,"hour");l(r,"minute");a("#hourSlider").slider("option","value",n);a("#minuteSlider").slider("option","value",r);a("#datepicker").datepicker("setDate",a.datepicker.parseDate(m.dateFormat,a("#pickerplug").data("lastdate")))}function g(o){var n=a(o.target);if((n.parents("#pickerplug").length||n.hasClass(e))&&!n.hasClass("ui-datepicker-close")){return}a("#pickerplug").hide("slow");a(this).unbind("click",g).unbind("keyup",h).removeClass(e)}function k(n,o){var q=j[o]||j.en;if(!a("#pickerplug").length){var p='<ul id="pickerplug">';p+="<li>";p+='<div id="datepicker"></div>';p+="</li>";p+="<li>";p+='<div id="timepicker" class="ui-corner-all ui-widget-content">';p+='<h3 id="tpSelectedTime">';p+='	<span id="text_time"></span>';p+='	<span class="selHrs" >00</span>';p+='	<span class="delim" >:</span>';p+='	<span class="selMins">00</span>';p+='	<span class="dayPeriod">am</span>';p+="</h3>";p+='<ul id="sliderContainer">';p+="	<li>";p+='        <h4 id="text_hour"></h4>';p+='        <div id="hourSlider" class="slider"></div>';p+="	</li>";p+="	<li>";p+='        <h4 id="text_minute"></h4>';p+='        <div id="minuteSlider" class="slider"></div>';p+="	</li>";p+="</ul>";p+="</div>";p+='<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" id="text_close"></button>';p+="</li>";p+="</ul>";a("body").append(p);a("#datepicker").datepicker();a(document).mousedown(g);a("#pickerplug .ui-datepicker-close").click(g);a("#hourSlider").slider({orientation:"vertical",range:"min",min:0,max:23,step:1,slide:function(r,s){i(l(s.value,"hour"),"time")},change:function(r,s){a("#tpSelectedTime .selHrs").effect("highlight",1000)}});a("#minuteSlider").slider({orientation:"vertical",range:"min",min:0,max:55,step:5,slide:function(r,s){i(l(s.value,"minute"),"time")},change:function(r,s){a("#tpSelectedTime .selMins").effect("highlight",1000)}});a("#tpSelectedTime .selHrs").keyup(function(s){var r=a(this);if((s.which<=57&&s.which>=48)&&(r.text()>=1&&r.text()<=12)){a("#hourSlider").slider("value",parseInt(r.text(),10))}else{r.val(r.text().slice(0,-1))}});a("#tpSelectedTime .selMins").keyup(function(s){var r=a(this);if((s.which<=57&&s.which>=48)&&(r.text()>=0&&r.text()<=59)){a("#minuteSlider").slider("value",parseInt(r.text(),10))}else{r.val(r.text().slice(0,-1))}})}a(".dayPeriod").toggle(!f);a("#text_time").text(q.time);a("#text_hour").text(q.hour);a("#text_minute").text(q.minute);a("#text_close").text(q.close);a("#pickerplug").data("userLang",o);a("#pickerplug").data("b24Hour",n)}a(this).bind("focus",function(){var o=a(this);var q=o.offset().top+o.outerHeight();var p=o.offset().left;var n=a("#pickerplug");var r=a("#datepicker");if(o.data("userLang")!=n.data("userLang")||o.data("b24Hour")!=n.data("userLang")){k(o.data("b24Hour"),o.data("userLang"))}n=a("#pickerplug");r=a("#datepicker");n.css({left:p+"px",top:q+"px"}).show("slow");if(o.data("userLang")!="en"&&j[o.data("userLang")]){r.datepicker("option",a.extend({},a.datepicker.regional[o.data("userLang")]));r.datepicker("option",a.extend(o.data("sets")))}else{r.datepicker("option",a.extend({},a.datepicker.regional[""]));r.datepicker("option",a.extend(o.data("sets")))}h(this);n=a("#pickerplug");r=a("#datepicker");if(n.css("display")=="none"){n.show("slow")}o.bind("keyup",h).addClass(e);n.data("inputfield",this)})})}})(jQuery);