var sly={};var slyLinkWidgetCallback=null;var slyMediaWidgetCallback=null;(function(f,g,e){var c=[];g.Popup=function(l,k,j,n,m,i,h){this.name=l;this.url=k;this.obj=window.open(k,l,"width="+m+",height="+i+h);this.obj.moveTo(j,n);this.obj.focus();c[l]=this;this.close=function(){this.obj.close()};this.setGlobal=function(o,p){this.obj[o]=p}};g.closeAllPopups=function(){for(var h in c){if(c.hasOwnProperty(h)){c[h].close()}}};g.openCenteredPopup=function(k,m,l,j,i){if(l===0){l=550}if(j===0){j=400}if(i===e){i=",scrollbars=yes,toolbar=no,status=yes,resizable=yes"}var h=parseInt((screen.width-l)/2,10);var n=parseInt((screen.height-j)/2,10)-24;return new g.Popup(k,m,h,n,l,j,i)};g.openMediapool=function(i,j,k){var h="index.php?page=mediapool";if(j){h+="&subpage=detail&file_name="+j}else{if(i&&(i!="detail"||j)){h+="&subpage="+i}}if(k){h+="&callback="+k}return g.openCenteredPopup("slymediapool",h,760,600)};g.openLinkmap=function(i,j){var h="index.php?page=linkmap";if(i){h+="&category_id="+i}if(j){h+="&callback="+j}return g.openCenteredPopup("slylinkmap",h,760,600)};var b=function(j,i){var h=function(){};h.prototype=i.prototype;j.prototype=new h()};g.AbstractWidget=function(i){this.element=f(i);this.valueInput=this.element.find("input[rel=value]");this.nameInput=this.element.find("input[rel=name]");var h=this.element.find(".sly-icons");h.delegate("a[rel=open]","click",f.proxy(this.onOpen,this));h.delegate("a[rel=add]","click",f.proxy(this.onAdd,this));h.delegate("a[rel=delete]","click",f.proxy(this.onDelete,this))};g.AbstractWidget.prototype={getValue:function(){return this.valueInput.val()},setValue:function(h,i){this.valueInput.val(h);this.nameInput.val(i);return true},clear:function(){this.setValue("","")},onOpen:function(){return false},onAdd:function(){return false},onDelete:function(){this.clear();return false}};g.MediaWidget=function(h){g.AbstractWidget.call(this,h)};b(g.MediaWidget,g.AbstractWidget);g.MediaWidget.prototype.onOpen=function(){g.openMediapool("detail",this.getValue(),"slyMediaWidgetCallback");slyMediaWidgetCallback=f.proxy(this.setValue,this);return false};g.MediaWidget.prototype.onAdd=function(){g.openMediapool("upload","","slyMediaWidgetCallback");slyMediaWidgetCallback=f.proxy(this.setValue,this);return false};g.LinkWidget=function(h){g.AbstractWidget.call(this,h)};b(g.LinkWidget,g.AbstractWidget);g.LinkWidget.prototype.onOpen=function(){var h=this.element.data("catid");g.openLinkmap(h,"slyLinkWidgetCallback");slyLinkWidgetCallback=f.proxy(this.setValue,this);return false};g.AbstractListWidget=function(i){this.element=f(i);this.input=this.element.find("input");this.list=this.element.find("select");var h=this.element.find(".sly-icons.move");h.delegate("a","click",f.proxy(this.onMove,this));h=this.element.find(".sly-icons.edit");h.delegate("a[rel=open]","click",f.proxy(this.onOpen,this));h.delegate("a[rel=add]","click",f.proxy(this.onAdd,this));h.delegate("a[rel=delete]","click",f.proxy(this.onDelete,this))};g.AbstractListWidget.prototype={getElements:function(){var k=this.list.find("option");var j=[];for(var l=0,h=k.length;l<h;++l){j.push(k[l].value)}return j},getSelected:function(){var h=this.list.find("option:selected");return h.length?h.val():null},clear:function(){this.list.find("option").remove();this.input.val("")},addValue:function(h,i){this.list.append(f("<option>").val(h).text(i));this.createList();return false},onDelete:function(){var i=this.list.find("option:selected");if(i.length===0){return false}var h=i.next();if(h.length===0){h=i.prev()}i.remove();h.prop("selected",true);this.createList();return false},onMove:function(i){var k=f(i.target).closest("a").attr("rel");var j=this.list;var h=j.find("option:selected");if(h.length===0){return false}if(k==="top"){j.prepend(h)}else{if(k==="up"){h.prev().insertAfter(h)}else{if(k==="down"){h.next().insertBefore(h)}else{if(k==="bottom"){j.append(h)}}}}this.createList();return false},createList:function(){this.input.val(this.getElements().join(","))},onOpen:function(){return false},onAdd:function(){return false}};g.MedialistWidget=function(h){g.AbstractListWidget.call(this,h)};b(g.MedialistWidget,g.AbstractListWidget);g.MedialistWidget.prototype.onOpen=function(){g.openMediapool("detail",this.getSelected(),"slyMediaWidgetCallback");slyMediaWidgetCallback=f.proxy(this.addValue,this);return false};g.MedialistWidget.prototype.onAdd=function(){g.openMediapool("upload","","slyMediaWidgetCallback");slyMediaWidgetCallback=f.proxy(this.addValue,this);return false};g.LinklistWidget=function(h){g.AbstractListWidget.call(this,h)};b(g.LinklistWidget,g.AbstractListWidget);g.LinklistWidget.prototype.onOpen=function(){var h=this.element.data("catid");g.openLinkmap(h,"slyLinkWidgetCallback");slyLinkWidgetCallback=f.proxy(this.addValue,this);return false};g.disableLogin=function(i){var h=parseInt(i.html(),10)-1;i.html(h+"");if(h>0){setTimeout(g.disableLogin,1000,i)}else{f("div.rex-message p span").html(f("#loginformular").data("message"));f("#loginformular input:not(:hidden)").prop("disabled",false);f("#rex_user_login").focus()}};g.startLoginTimer=function(i){var h=f("div.rex-message p span strong");if(h.length==1){f("#loginformular input:not(:hidden)").prop("disabled",true);f("#loginformular").data("message",i);setTimeout(g.disableLogin,1000,h)}};var d=function(){var h=f("#userperm_cat_all").prop("checked");var i=f("#userperm_media_all").prop("checked");var j=f("#rex-page-user .sly-form .rex-form-wrapper .sly-num7");f("#userperm_cat").prop("disabled",h);f("#userperm_media").prop("disabled",i);if(h&&i){j.slideUp("slow")}else{j.slideDown("slow")}};var a=function(){var j=f("#is_admin").is(":checked");var i=f("#userperm_sprachen").val()?true:false;var l=f("#userperm_startpage");var h=l.find("option[value=structure]");var k=h.is(":selected");if(j||i){h.prop("disabled",false)}else{h.prop("disabled",true);if(k){l.find("option[value=profile]").prop("selected",true)}}};f(function(){f(".sly-widget").each(function(){var m=f(this);if(m.is(".sly-link")){new g.LinkWidget(this)}else{if(m.is(".sly-media")){new g.MediaWidget(this)}else{if(m.is(".sly-linklist")){new g.LinklistWidget(this)}else{if(m.is(".sly-medialist")){new g.MedialistWidget(this)}}}}});f(".sly-check-all").click(function(){var m=f(this).data("target");f("input[name='"+m+"']").prop("checked",this.checked)});f("table.sly-table").delegate("a.sly-delete, input.sly-button-delete","click",function(){var n=f(this).parents("table");var m=n.attr("rel");if(!m){m="LÃ¶schen?"}return confirm(m)});f(".sly-table-extras-filter input[class^=filter_input_]").keyup(function(q){var o=f(this).attr("class"),n=o.replace("filter_input_",""),p=f("#"+n),r=q.keyCode;f("input."+o).val(f(this).val());q.preventDefault();if(r==8||r==46||r==109||r==189||(r>=65&&r<=90)||(r>=48&&r<=57)){var m=new RegExp(f(this).val(),"i");f("tbody tr",p).each(function(){var s=f(this);f("td",s).filter(function(){return m.test(f(this).text())}).length?s.show():s.hide()})}});f("a.sly-blank").attr("target","_blank");f("#rex-navi-page-mediapool a").click(function(){g.openMediapool();return false});if(f("#rex-form-login").length>0){f("#rex-form-login").focus();f("#javascript").val("1")}if(f("#rex-page-user .sly-form").length>0){var l=f("#rex-page-user .sly-form .rex-form-wrapper");var j=l.find(".sly-num6,.sly-num7");f("#is_admin").change(function(){if(f(this).is(":checked")){f("#userperm_module").prop("disabled",true);j.slideUp("slow")}else{f("#userperm_module").prop("disabled",false);j.slideDown("slow");d()}});d();f("#userperm_cat_all, #userperm_media_all").change(d);if(f("#is_admin").is(":checked")){f("#userperm_module").prop("disabled",true);j.hide()}if(f("#userperm_cat_all").is(":checked")&&f("#userperm_media_all").is(":checked")){l.find(".sly-num7").hide()}a();f("#is_admin, #userperm_sprachen").change(a)}f(".sly-form .sly-select-checkbox-list a").live("click",function(){var m=f(this).attr("rel");var n=f(this).parents("p").find("input");n.prop("checked",m==="all");return false});if(typeof Modernizr!=="undefined"){var h=Modernizr.inputtypes;for(var i in h){if(h.hasOwnProperty(i)&&h[i]){f("input[type="+i+"]").addClass("ua-supported")}}}f("input[type=range]:not(.ua-supported)").each(function(){var m=f(this);var n=f("<div></div>").attr("id",m.attr("id")+"-slider");var o=f('<input type="hidden" value="" />');m.after(o);o.val(m.val()).attr("name",m.attr("name")).attr("id",m.attr("id"));m.after(n);n.addClass("sly-slider").slider({min:m.attr("min"),max:m.attr("max"),value:m.val(),change:function(p){o.val(n.slider("value"))}});m.remove()});f(".rex-form-row.sly-form-multilingual").each(function(){var q=f(this),o=q.is(":visible"),r=q.attr("rel"),p=o?' checked="checked"':"",n='<span class="sly-form-i18n-switch"><input type="checkbox" name="equal__'+r+'" id="equal__'+r+'" value="1"'+p+" /></span>";if(o){f("label:first",this).after(n)}else{var m=q.next("div.sly-form-i18n-container");f("label:first",m).after(n)}});var k=f(".sly-form-i18n-switch input[id^=equal__]");if(k.length>0){k.imgCheckbox("off.png","on.png","assets/form-i18n-switch-").next().click(function(){var q=f(this).prev("input"),p=!q[0].checked,r=q.attr("id").replace(/^equal__/,""),n=f('div[rel="'+r+'"]'),o=q.parent("span"),m=f("div.sly-form-i18n-container.c-"+r);if(p){n.hide();m.show();f("label:first",m).after(o)}else{n.show();m.hide();f("label:first",n).after(o)}})}f(".sly-module-select").change(function(){f(this).closest("form").submit()});f("body.sly-popup").unload(g.closeAllPopups)})})(jQuery,sly);