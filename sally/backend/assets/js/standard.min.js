var sly={};(function(e,t,n,r){var i=[];t.Popup=function(e,t,r,s,o,u,a){var f=navigator.userAgent;e+=(new Date).getTime(),this.name=e,this.url=t,this.obj=n.open(t,e,"width="+o+",height="+u+a),f.indexOf("Chrome/18.")===-1&&f.indexOf("Chrome/20.")===-1&&(this.obj.moveTo(r,s),this.obj.focus()),i[e]=this,this.close=function(){this.obj.close()},this.setGlobal=function(e,t){this.obj[e]=t}},t.closeAllPopups=function(){for(var e in i)i.hasOwnProperty(e)&&i[e].close()},t.openCenteredPopup=function(e,n,i,s,o){i===0&&(i=550),s===0&&(s=400),o===r&&(o=",scrollbars=yes,toolbar=no,status=yes,resizable=yes");var u=parseInt((screen.width-i)/2,10),a=parseInt((screen.height-s)/2,10)-24;return new t.Popup(e,n,u,a,i,s,o)},t.openMediapool=function(n,r,i,s,o){var u="index.php?page=mediapool";return r?u+="_detail&file_name="+r:n&&(n!=="detail"||r)&&(u+="_"+n),i&&(u+="&callback="+i),e.isArray(s)&&s.length>0&&(u+="&args[types]="+s.join("|")),e.isArray(o)&&o.length>0&&(u+="&args[categories]="+o.join("|")),t.openCenteredPopup("slymediapool",u,760,600)},t.openLinkmap=function(n,r,i,s){var o="index.php?page=linkmap";return n&&(o+="&category_id="+n),r&&(o+="&callback="+r),e.isArray(i)&&i.length>0&&(o+="&args[types]="+i.join("|")),e.isArray(s)&&s.length>0&&(o+="&args[categories]="+s.join("|")),t.openCenteredPopup("slylinkmap",o,760,600)},t.inherit=function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n};var s=function(e){return e+(new Date).getTime()},o=function(e,t){var n=((e.data(t)||"")+"").split("|"),r=n.length,i=0,s=[];for(;i<r;++i)n[i].length>0&&s.push(n[i]);return s};t.AbstractWidget=function(t){this.element=e(t),this.valueInput=this.element.find("input.value"),this.nameInput=this.element.find("input.name");var n=this.element.find(".sly-icons");n.delegate("a.fct-open","click",e.proxy(this.onOpen,this)),n.delegate("a.fct-add","click",e.proxy(this.onAdd,this)),n.delegate("a.fct-delete","click",e.proxy(this.onDelete,this))},t.AbstractWidget.prototype={getValue:function(){return this.valueInput.val()},setValue:function(e,t){return this.valueInput.val(e),this.nameInput.val(t),this.valueInput.change(),!0},clear:function(){this.setValue("","")},onOpen:function(){return!1},onAdd:function(){return!1},onDelete:function(){return this.clear(),!1}},t.MediaWidget=function(e){t.AbstractWidget.call(this,e),this.filetypes=o(this.element,"filetypes"),this.categories=o(this.element,"categories")},t.inherit(t.MediaWidget,t.AbstractWidget),t.MediaWidget.prototype.onOpen=function(){var r=s("slymediawidget");return t.openMediapool("detail",this.getValue(),r,this.filetypes,this.categories),n[r]=e.proxy(this.setValue,this),!1},t.MediaWidget.prototype.onAdd=function(){var r=s("slymediawidget");return t.openMediapool("upload","",r,this.filetypes,this.categories),n[r]=e.proxy(this.setValue,this),!1},t.LinkWidget=function(e){t.AbstractWidget.call(this,e),this.articletypes=o(this.element,"articletypes"),this.categories=o(this.element,"categories")},t.inherit(t.LinkWidget,t.AbstractWidget),t.LinkWidget.prototype.onOpen=function(){var r=this.element.data("catid"),i=s("slylinkwidget");return t.openLinkmap(r,i,this.articletypes,this.categories),n[i]=e.proxy(this.setValue,this),!1},t.AbstractListWidget=function(t){this.element=e(t),this.input=this.element.find("input[type=hidden]"),this.list=this.element.find("select"),this.min=this.element.data("min")||0,this.max=this.element.data("max")||-1;var n=this.element.find(".sly-icons.move");n.delegate("a","click",e.proxy(this.onMove,this)),n=this.element.find(".sly-icons.edit"),n.delegate("a.fct-open","click",e.proxy(this.onOpen,this)),n.delegate("a.fct-add","click",e.proxy(this.onAdd,this)),n.delegate("a.fct-delete","click",e.proxy(this.onDelete,this))},t.AbstractListWidget.prototype={getElements:function(){var e=this.list.find("option"),t=[];for(var n=0,r=e.length;n<r;++n)t.push(e[n].value);return t},getCount:function(){return this.list.find("option").length},getSelected:function(){var e=this.list.find("option:selected");return e.length?e.val():null},clear:function(){this.list.find("option").remove(),this.input.val("").change()},addValue:function(t,n){var r=this.getCount(),i=this.max;if(r===i)return!0;this.list.append(e("<option>").val(t).text(n)),this.createList();var s=r+1===i;return s&&this.element.addClass("at-max"),this.element.toggleClass("at-min",r+1<=this.min),s},onDelete:function(){var e=this.list.find("option:selected");if(e.length===0)return!1;var t=this.getCount()-this.min;if(t===0)return!1;e=e.slice(0,t);var n=e.next();return n.length===0&&(n=e.prev()),e.remove(),n.prop("selected",!0),this.element.removeClass("at-max").toggleClass("at-min",this.getCount()===this.min),this.createList(),!1},onMove:function(e){var t=e.target.className.replace("fct-",""),n=this.list,r=n.find("option:selected");return r.length===0?!1:(t==="top"?n.prepend(r):t==="up"?r.prev().insertAfter(r):t==="down"?r.next().insertBefore(r):t==="bottom"&&n.append(r),this.createList(),!1)},createList:function(){this.input.val(this.getElements().join(",")).change()},onOpen:function(){return!1},onAdd:function(){return!1}},t.MedialistWidget=function(e){t.AbstractListWidget.call(this,e),this.filetypes=o(this.element,"filetypes"),this.categories=o(this.element,"categories")},t.inherit(t.MedialistWidget,t.AbstractListWidget),t.MedialistWidget.prototype.onOpen=function(){if(this.getCount()===this.max)return!1;var r=s("slymedialistwidget");return t.openMediapool("detail",this.getSelected(),r,this.filetypes,this.categories),n[r]=e.proxy(this.addValue,this),!1},t.MedialistWidget.prototype.onAdd=function(){if(this.getCount()===this.max)return!1;var r=s("slymedialistwidget");return t.openMediapool("upload","",r,this.filetypes,this.categories),n[r]=e.proxy(this.addValue,this),!1},t.LinklistWidget=function(e){t.AbstractListWidget.call(this,e),this.articletypes=o(this.element,"articletypes"),this.categories=o(this.element,"categories")},t.inherit(t.LinklistWidget,t.AbstractListWidget),t.LinklistWidget.prototype.onOpen=function(){if(this.getCount()===this.max)return!1;var r=this.element.data("catid"),i=s("slylinklistwidget");return t.openLinkmap(r,i,this.articletypes,this.categories),n[i]=e.proxy(this.addValue,this),!1},t.disableLogin=function(r){var i=parseInt(r.html(),10)-1;r.html(i+""),i>0?n.setTimeout(t.disableLogin,1e3,r):(e("div.sly-message p span").html(e("#sly_login_form").data("message")),e("#sly_login_form input:not(:hidden)").prop("disabled",!1))},t.startLoginTimer=function(r){var i=e("div.sly-message p span strong");i.length===1&&(e("#sly_login_form input:not(:hidden)").prop("disabled",!0),e("#sly_login_form").data("message",r),n.setTimeout(t.disableLogin,1e3,i))},t.setModernizrCookie=function(){if(typeof Modernizr=="undefined")return!1;var e=Modernizr,t=JSON.parse(JSON.stringify(e)),n;t.audio={},t.video={};for(n in e.audio)t.audio[n]=e.audio[n];for(n in e.video)t.video[n]=e.video[n];t._version=r,t._prefixes=r,t._domPrefixes=r,t._cssomPrefixes=r,document.cookie="sly_modernizr="+escape(JSON.stringify(t))},t.addDatepickerToggler=function(t,n){var r=t.attr("name"),i=e('<input type="hidden" value="" />').attr("name",(n===0?"":"_")+r),s=e('<span class="sly-date-disabled" style="cursor:pointer">(&hellip;)</span>'),o=e('<input type="checkbox" value="1" class="sly-form-checkbox" />');s.click(function(){e(this).prevAll().click()}),o.change(function(){var e=this.checked;t.toggle(e).attr("name",(e?"":"_")+r),s.toggle(!e),i.attr("name",(e?"_":"")+r)}),t.before(o).after(i).after(s),n!==0?(o.prop("checked",!0),s.hide()):(o.prop("checked",!1),t.hide())},t.initWidgets=function(n){e(".sly-widget:not(.sly-initialized)",n).each(function(){var n=e(this),r=!1;n.is(".sly-link")?(new t.LinkWidget(this),r=!0):n.is(".sly-media")?(new t.MediaWidget(this),r=!0):n.is(".sly-linklist")?(new t.LinklistWidget(this),r=!0):n.is(".sly-medialist")&&(new t.MedialistWidget(this),r=!0),r&&n.addClass("sly-initialized")})},e(function(){t.initWidgets(),e(".sly-check-all").click(function(){var t=e(this).data("target");e("input[name='"+t+"']").prop("checked",this.checked)}),e("a.sly-delete, input.sly-button-delete").click(function(){return confirm("Sicher?")}),e("a.sly-confirm-me").click(function(){return confirm("Sicher?")}),e(".sly-table-extras-filter input[class*=filter_input_]").keyup(function(t){var n=e(this).attr("class"),r=n.match(/filter_input_([a-zA-Z0-9-_]+)/)[1],i=e("#"+r),s=t.keyCode;e("input."+n).val(e(this).val()),t.preventDefault();if(s===8||s===46||s===109||s===189||s>=65&&s<=90||s>=48&&s<=57){var o=new RegExp(e(this).val(),"i");e("tbody tr",i).each(function(){var t=e(this);e("td",t).filter(function(){return o.test(e(this).text())}).length?t.show():t.hide()})}}),e("a.sly-blank").attr("target","_blank"),e("#sly-navi-page-mediapool a").click(function(){return t.openMediapool(),!1}),e(".sly-form .sly-select-checkbox-list a").live("click",function(){var t=e(this).attr("rel"),n=e(this).closest("div").find("input");return n.prop("checked",t==="all"),!1});if(typeof Modernizr!="undefined"){var r=Modernizr.inputtypes;for(var i in r)r.hasOwnProperty(i)&&r[i]&&e("input[type="+i+"]").addClass("ua-supported");Modernizr.input.autofocus||e("*[autofocus]").focus()}e("input[type=range]:not(.ua-supported)").each(function(){var t=e(this),n=e("<div></div>").attr("id",t.attr("id")+"-slider"),r=e('<input type="hidden" value="" />');t.after(r),r.val(t.val()).attr("name",t.attr("name")).attr("id",t.attr("id")),t.after(n),n.addClass("sly-slider").slider({min:t.attr("min"),max:t.attr("max"),value:t.val(),change:function(){r.val(n.slider("value"))}}),t.remove()});var s=function(t){if(typeof e.fn.chosen!="undefined"){var n=e("select:not(.sly-no-chosen) option",t),r=n.length,i=0,s,o;for(;i<r;++i)o=e(n[i]),s=o.html().match(/^(&nbsp;)*/)[0].length/6,s>0&&o.addClass("sly-lvl-"+s).html(o.html().substr(s*6));e(".sly-form-select:not(.sly-no-chosen)",t).data("placeholder","Bitte ausw√§hlen").chosen()}};s(e("body")),e("body").bind("rowAdded",function(e){s(e.currentTarget)}),e(".sly-form-row.sly-form-multilingual").each(function(){var t=e(this),n=t.is(":visible"),r=t.attr("rel"),i=n?' checked="checked"':"",s='<span class="sly-form-i18n-switch"><input type="checkbox" name="equal__'+r+'" id="equal__'+r+'" value="1"'+i+" /></span>";if(n)e("label:first",this).after(s);else{var o=t.next("div.sly-form-i18n-container");e("label:first",o).after(s)}});var o=e(".sly-form-i18n-switch input[id^=equal__]");o.length>0&&o.imgCheckbox("off.png","on.png","assets/form-i18n-switch-").next().click(function(){var t=e(this).prev("input"),n=!t[0].checked,r=t.attr("id").replace(/^equal__/,""),i=e('div[rel="'+r+'"]'),s=t.parent("span"),o=e("div.sly-form-i18n-container.c-"+r);n?(i.hide(),o.show(),e("label:first",o).after(s)):(i.show(),o.hide(),e("label:first",i).after(s))}),e(".sly-module-select").change(function(){e(this).closest("form").submit()}),e("#sly-system-toggle-cache").click(function(){return e("#sly-form-system-caches p").slideToggle(),!1});var u=null;e("#sly-page-addon .sly-addonlist").delegate("a:not(.sly-blank)","click",function(){var t=e(this),r=e(".sly-addonlist"),i=e(".component",r),s=t.closest(".component"),o=e(".error",r);o.hide(),u&&n.clearTimeout(u),i.prepend('<div class="blocker"></div>'),s.addClass("working");var a=function(t){for(var n in t){if(!t.hasOwnProperty(n))continue;var r=t[n],i=e('.component[data-key="'+n+'"]');i.attr("class",r.classes+" component"),e(".deps",i).html(r.deps)}};return e.ajax({url:t.attr("href")+"&json=1",cache:!1,dataType:"json",type:"POST",success:function(t){a(t.stati),s.removeClass("working"),e(".blocker").remove(),t.status!==!0&&(s.after(o),e("span",o).html(t.message),o.show(),u=n.setTimeout(function(){o.slideUp()},1e4))}}),!1}),e("body.sly-popup").unload(t.closeAllPopups)})})(jQuery,sly,window);