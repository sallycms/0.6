var sly={};(function(a,b,c,d){var e=[];b.Popup=function(a,b,c,d,f,g,h){a+=(new Date).getTime(),this.name=a,this.url=b,this.obj=window.open(b,a,"width="+f+",height="+g+h),this.obj.moveTo(c,d),this.obj.focus(),e[a]=this,this.close=function(){this.obj.close()},this.setGlobal=function(a,b){this.obj[a]=b}},b.closeAllPopups=function(){for(var a in e)e.hasOwnProperty(a)&&e[a].close()},b.openCenteredPopup=function(a,c,e,f,g){e===0&&(e=550),f===0&&(f=400),g===d&&(g=",scrollbars=yes,toolbar=no,status=yes,resizable=yes");var h=parseInt((screen.width-e)/2,10),i=parseInt((screen.height-f)/2,10)-24;return new b.Popup(a,c,h,i,e,f,g)},b.openMediapool=function(c,d,e,f,g){var h="index.php?page=mediapool";return d?h+="_detail&file_name="+d:c&&(c!="detail"||d)&&(h+="_"+c),e&&(h+="&callback="+e),a.isArray(f)&&f.length>0&&(h+="&args[types]="+f.join("|")),a.isArray(g)&&g.length>0&&(h+="&args[categories]="+g.join("|")),b.openCenteredPopup("slymediapool",h,760,600)},b.openLinkmap=function(c,d,e,f){var g="index.php?page=linkmap";return c&&(g+="&category_id="+c),d&&(g+="&callback="+d),a.isArray(e)&&e.length>0&&(g+="&args[types]="+e.join("|")),a.isArray(f)&&f.length>0&&(g+="&args[categories]="+f.join("|")),b.openCenteredPopup("slylinkmap",g,760,600)};var f=function(a,b){var c=function(){};c.prototype=b.prototype,a.prototype=new c},g=function(a){return a+(new Date).getTime()},h=function(a,b){var c=((a.data(b)||"")+"").split("|"),d=c.length,e=0,f=[];for(;e<d;++e)c[e].length>0&&f.push(c[e]);return f};b.AbstractWidget=function(b){this.element=a(b),this.valueInput=this.element.find("input.value"),this.nameInput=this.element.find("input.name");var c=this.element.find(".sly-icons");c.delegate("a.fct-open","click",a.proxy(this.onOpen,this)),c.delegate("a.fct-add","click",a.proxy(this.onAdd,this)),c.delegate("a.fct-delete","click",a.proxy(this.onDelete,this))},b.AbstractWidget.prototype={getValue:function(){return this.valueInput.val()},setValue:function(a,b){return this.valueInput.val(a),this.nameInput.val(b),!0},clear:function(){this.setValue("","")},onOpen:function(){return!1},onAdd:function(){return!1},onDelete:function(){return this.clear(),!1}},b.MediaWidget=function(a){b.AbstractWidget.call(this,a),this.filetypes=h(this.element,"filetypes"),this.categories=h(this.element,"categories")},f(b.MediaWidget,b.AbstractWidget),b.MediaWidget.prototype.onOpen=function(){var d=g("slymediawidget");return b.openMediapool("detail",this.getValue(),d,this.filetypes,this.categories),c[d]=a.proxy(this.setValue,this),!1},b.MediaWidget.prototype.onAdd=function(){var d=g("slymediawidget");return b.openMediapool("upload","",d,this.filetypes,this.categories),c[d]=a.proxy(this.setValue,this),!1},b.LinkWidget=function(a){b.AbstractWidget.call(this,a),this.articletypes=h(this.element,"articletypes"),this.categories=h(this.element,"categories")},f(b.LinkWidget,b.AbstractWidget),b.LinkWidget.prototype.onOpen=function(){var d=this.element.data("catid"),e=g("slylinkwidget");return b.openLinkmap(d,e,this.articletypes,this.categories),c[e]=a.proxy(this.setValue,this),!1},b.AbstractListWidget=function(b){this.element=a(b),this.input=this.element.find("input"),this.list=this.element.find("select");var c=this.element.find(".sly-icons.move");c.delegate("a","click",a.proxy(this.onMove,this)),c=this.element.find(".sly-icons.edit"),c.delegate("a.fct-open","click",a.proxy(this.onOpen,this)),c.delegate("a.fct-add","click",a.proxy(this.onAdd,this)),c.delegate("a.fct-delete","click",a.proxy(this.onDelete,this))},b.AbstractListWidget.prototype={getElements:function(){var a=this.list.find("option"),b=[];for(var c=0,d=a.length;c<d;++c)b.push(a[c].value);return b},getSelected:function(){var a=this.list.find("option:selected");return a.length?a.val():null},clear:function(){this.list.find("option").remove(),this.input.val("")},addValue:function(b,c){return this.list.append(a("<option>").val(b).text(c)),this.createList(),!1},onDelete:function(){var a=this.list.find("option:selected");if(a.length===0)return!1;var b=a.next();return b.length===0&&(b=a.prev()),a.remove(),b.prop("selected",!0),this.createList(),!1},onMove:function(b){var c=a(b.target).closest("a")[0].className.replace("fct-"),d=this.list,e=d.find("option:selected");return e.length===0?!1:(c==="top"?d.prepend(e):c==="up"?e.prev().insertAfter(e):c==="down"?e.next().insertBefore(e):c==="bottom"&&d.append(e),this.createList(),!1)},createList:function(){this.input.val(this.getElements().join(","))},onOpen:function(){return!1},onAdd:function(){return!1}},b.MedialistWidget=function(a){b.AbstractListWidget.call(this,a),this.filetypes=h(this.element,"filetypes"),this.categories=h(this.element,"categories")},f(b.MedialistWidget,b.AbstractListWidget),b.MedialistWidget.prototype.onOpen=function(){var d=g("slymedialistwidget");return b.openMediapool("detail",this.getSelected(),d,this.filetypes,this.categories),c[d]=a.proxy(this.addValue,this),!1},b.MedialistWidget.prototype.onAdd=function(){var d=g("slymedialistwidget");return b.openMediapool("upload","",d,this.filetypes,this.categories),c[d]=a.proxy(this.addValue,this),!1},b.LinklistWidget=function(a){b.AbstractListWidget.call(this,a),this.articletypes=h(this.element,"articletypes"),this.categories=h(this.element,"categories")},f(b.LinklistWidget,b.AbstractListWidget),b.LinklistWidget.prototype.onOpen=function(){var d=this.element.data("catid"),e=g("slylinklistwidget");return b.openLinkmap(d,e,this.articletypes,this.categories),c[e]=a.proxy(this.addValue,this),!1},b.disableLogin=function(c){var d=parseInt(c.html(),10)-1;c.html(d+""),d>0?setTimeout(b.disableLogin,1e3,c):(a("div.sly-message p span").html(a("#sly_login_form").data("message")),a("#sly_login_form input:not(:hidden)").prop("disabled",!1))},b.startLoginTimer=function(c){var d=a("div.sly-message p span strong");d.length==1&&(a("#sly_login_form input:not(:hidden)").prop("disabled",!0),a("#sly_login_form").data("message",c),setTimeout(b.disableLogin,1e3,d))},b.setModernizrCookie=function(){if(typeof Modernizr=="undefined")return!1;var a=[];for(var b in Modernizr)if(Modernizr.hasOwnProperty(b)){var c=Modernizr[b];b='"'+b+'"';if(typeof c=="object"){var d=[];for(var e in c)d.push('"'+e+'":'+(c[e]?1:0));a.push(b+":{"+d.join(",")+"}")}else a.push(b+':"'+c+'"')}a="{"+a.join(",")+"}",document.cookie="sly_modernizr="+escape(a)},b.addDatepickerToggler=function(b,c){var d=b.attr("name"),e=a('<input type="hidden" value="" />').attr("name",(c===0?"":"_")+d),f=a('<span class="sly-date-disabled" style="cursor:pointer">(&hellip;)</span>'),g=a('<input type="checkbox" value="1" class="sly-form-checkbox" />');f.click(function(){a(this).prevAll().click()}),g.change(function(){var a=this.checked;b.toggle(a).attr("name",(a?"":"_")+d),f.toggle(!a),e.attr("name",(a?"_":"")+d)}),b.before(g).after(e).after(f),c!==0?(g.prop("checked",!0),f.hide()):(g.prop("checked",!1),b.hide())};var i=function(){var b=a("#userperm_cat_all").prop("checked"),c=a("#userperm_media_all").prop("checked"),d=a("#sly-page-user .sly-form .sly-form-wrapper .sly-num7");a("#userperm_cat").prop("disabled",b),a("#userperm_media").prop("disabled",c),b&&c?d.slideUp("slow"):d.slideDown("slow")},j=function(){var b=a("#is_admin").is(":checked"),c=a("#userperm_sprachen").val()?!0:!1,d=a("#userperm_startpage"),e=d.find("option[value=structure]"),f=e.is(":selected");b||c?e.prop("disabled",!1):(e.prop("disabled",!0),f&&d.find("option[value=profile]").prop("selected",!0))};a(function(){a(".sly-widget").each(function(){var c=a(this);c.is(".sly-link")?new b.LinkWidget(this):c.is(".sly-media")?new b.MediaWidget(this):c.is(".sly-linklist")?new b.LinklistWidget(this):c.is(".sly-medialist")&&new b.MedialistWidget(this)}),a(".sly-check-all").click(function(){var b=a(this).data("target");a("input[name='"+b+"']").prop("checked",this.checked)}),a("a.sly-delete, input.sly-button-delete").click(function(){return confirm("Sicher?")}),a(".sly-table-extras-filter input[class^=filter_input_]").keyup(function(b){var c=a(this).attr("class"),d=c.replace("filter_input_",""),e=a("#"+d),f=b.keyCode;a("input."+c).val(a(this).val()),b.preventDefault();if(f==8||f==46||f==109||f==189||f>=65&&f<=90||f>=48&&f<=57){var g=new RegExp(a(this).val(),"i");a("tbody tr",e).each(function(){var b=a(this);a("td",b).filter(function(){return g.test(a(this).text())}).length?b.show():b.hide()})}}),a("a.sly-blank").attr("target","_blank"),a("#sly-navi-page-mediapool a").click(function(){return b.openMediapool(),!1});if(a("#sly-page-user .sly-form").length>0){var c=a("#sly-page-user .sly-form .sly-form-wrapper"),d=c.find(".sly-num6,.sly-num7");a("#is_admin").change(function(){a(this).is(":checked")?(a("#userperm_module").prop("disabled",!0),d.slideUp("slow")):(a("#userperm_module").prop("disabled",!1),d.slideDown("slow"),i())}),i(),a("#userperm_cat_all, #userperm_media_all").change(i),a("#is_admin").is(":checked")&&(a("#userperm_module").prop("disabled",!0),d.hide()),a("#userperm_cat_all").is(":checked")&&a("#userperm_media_all").is(":checked")&&c.find(".sly-num7").hide(),j(),a("#is_admin, #userperm_sprachen").change(j)}a(".sly-form .sly-select-checkbox-list a").live("click",function(){var b=a(this).attr("rel"),c=a(this).closest("div").find("input");return c.prop("checked",b==="all"),!1});if(typeof Modernizr!="undefined"){var e=Modernizr.inputtypes;for(var f in e)e.hasOwnProperty(f)&&e[f]&&a("input[type="+f+"]").addClass("ua-supported")}Modernizr.input.autofocus||a("*[autofocus]").focus(),a("input[type=range]:not(.ua-supported)").each(function(){var b=a(this),c=a("<div></div>").attr("id",b.attr("id")+"-slider"),d=a('<input type="hidden" value="" />');b.after(d),d.val(b.val()).attr("name",b.attr("name")).attr("id",b.attr("id")),b.after(c),c.addClass("sly-slider").slider({min:b.attr("min"),max:b.attr("max"),value:b.val(),change:function(a){d.val(c.slider("value"))}}),b.remove()}),a(".sly-form-row.sly-form-multilingual").each(function(){var b=a(this),c=b.is(":visible"),d=b.attr("rel"),e=c?' checked="checked"':"",f='<span class="sly-form-i18n-switch"><input type="checkbox" name="equal__'+d+'" id="equal__'+d+'" value="1"'+e+" /></span>";if(c)a("label:first",this).after(f);else{var g=b.next("div.sly-form-i18n-container");a("label:first",g).after(f)}});var g=a(".sly-form-i18n-switch input[id^=equal__]");g.length>0&&g.imgCheckbox("off.png","on.png","assets/form-i18n-switch-").next().click(function(){var b=a(this).prev("input"),c=!b[0].checked,d=b.attr("id").replace(/^equal__/,""),e=a('div[rel="'+d+'"]'),f=b.parent("span"),g=a("div.sly-form-i18n-container.c-"+d);c?(e.hide(),g.show(),a("label:first",g).after(f)):(e.show(),g.hide(),a("label:first",e).after(f))}),a(".sly-module-select").change(function(){a(this).closest("form").submit()});var h=null;a("#sly-page-addon .sly-addonlist").delegate("a:not(.sly-blank)","click",function(){var b=a(this),c=a(".sly-addonlist"),d=a(".component",c),e=b.closest(".component"),f=a(".error",c);f.hide(),h&&window.clearTimeout(h),d.prepend('<div class="blocker"></div>'),e.addClass("working");var g=function(b){for(var c in b){if(!b.hasOwnProperty(c))continue;var d=b[c],e=a('.component[data-key="'+c+'"]');e.attr("class",d.classes+" component"),a(".depsinfo",e).html(d.deps)}};return a.ajax({url:b.attr("href")+"&json=1",cache:!1,dataType:"json",type:"POST",success:function(b){g(b.stati),e.removeClass("working"),a(".blocker").remove(),b.status!==!0&&(e.after(f),a("span",f).html(b.message),f.show(),h=window.setTimeout(function(){f.slideUp()},1e4))}}),!1}),a("body.sly-popup").unload(b.closeAllPopups)})})(jQuery,sly,window);