var sly={};var slyLinkWidgetCallback=null;var slyMediaWidgetCallback=null;(function(e,f,d){var b=[];f.Popup=function(k,j,i,m,l,h,g){this.name=k;this.url=j;this.obj=window.open(j,k,"width="+l+",height="+h+g);this.obj.moveTo(i,m);this.obj.focus();b[k]=this;this.close=function(){this.obj.close()};this.setGlobal=function(n,o){this.obj[n]=o}};f.closeAllPopups=function(){for(var g in b){if(b.hasOwnProperty(g)){b[g].close()}}};f.openCenteredPopup=function(j,l,k,i,h){if(k===0){k=550}if(i===0){i=400}if(h===d){h=",scrollbars=yes,toolbar=no,status=yes,resizable=yes"}var g=parseInt((screen.width-k)/2,10);var m=parseInt((screen.height-i)/2,10)-24;return new f.Popup(j,l,g,m,k,i,h)};f.openMediapool=function(h,i,j){var g="index.php?page=mediapool";if(i){g+="&subpage=detail&file_name="+i}else{if(h&&(h!="detail"||i)){g+="&subpage="+h}}if(j){g+="&callback="+j}return f.openCenteredPopup("slymediapool",g,760,600)};f.openLinkmap=function(h,i){var g="index.php?page=linkmap";if(h){g+="&category_id="+h}if(i){g+="&callback="+i}return f.openCenteredPopup("slylinkmap",g,760,600)};var a=function(i,h){var g=function(){};g.prototype=h.prototype;i.prototype=new g()};f.AbstractWidget=function(h){this.element=e(h);this.valueInput=this.element.find("input[rel=value]");this.nameInput=this.element.find("input[rel=name]");var g=this.element.find(".sly-icons");g.delegate("a[rel=open]","click",e.proxy(this.onOpen,this));g.delegate("a[rel=add]","click",e.proxy(this.onAdd,this));g.delegate("a[rel=delete]","click",e.proxy(this.onDelete,this))};f.AbstractWidget.prototype={getValue:function(){return this.valueInput.val()},setValue:function(g,h){this.valueInput.val(g);this.nameInput.val(h);return true},clear:function(){this.setValue("","")},onOpen:function(){return false},onAdd:function(){return false},onDelete:function(){this.clear();return false}};f.MediaWidget=function(g){f.AbstractWidget.call(this,g)};a(f.MediaWidget,f.AbstractWidget);f.MediaWidget.prototype.onOpen=function(){f.openMediapool("detail",this.getValue(),"slyMediaWidgetCallback");slyMediaWidgetCallback=e.proxy(this.setValue,this);return false};f.MediaWidget.prototype.onAdd=function(){f.openMediapool("upload","","slyMediaWidgetCallback");slyMediaWidgetCallback=e.proxy(this.setValue,this);return false};f.LinkWidget=function(g){f.AbstractWidget.call(this,g)};a(f.LinkWidget,f.AbstractWidget);f.LinkWidget.prototype.onOpen=function(){var g=this.element.data("catid");f.openLinkmap(g,"slyLinkWidgetCallback");slyLinkWidgetCallback=e.proxy(this.setValue,this);return false};f.AbstractListWidget=function(h){this.element=e(h);this.input=this.element.find("input");this.list=this.element.find("select");var g=this.element.find(".sly-icons.move");g.delegate("a","click",e.proxy(this.onMove,this));g=this.element.find(".sly-icons.edit");g.delegate("a[rel=open]","click",e.proxy(this.onOpen,this));g.delegate("a[rel=add]","click",e.proxy(this.onAdd,this));g.delegate("a[rel=delete]","click",e.proxy(this.onDelete,this))};f.AbstractListWidget.prototype={getElements:function(){var j=this.list.find("option");var h=[];for(var k=0,g=j.length;k<g;++k){h.push(j[k].value)}return h},getSelected:function(){var g=this.list.find("option:selected");return g.length?g.val():null},clear:function(){this.list.find("option").remove();this.input.val("")},addValue:function(g,h){this.list.append(e("<option>").val(g).text(h));this.createList();return false},onDelete:function(){var h=this.list.find("option:selected");if(h.length===0){return false}var g=h.next();if(g.length===0){g=h.prev()}h.remove();g.prop("selected",true);this.createList();return false},onMove:function(h){var j=e(h.target).closest("a").attr("rel");var i=this.list;var g=i.find("option:selected");if(g.length===0){return false}if(j==="top"){i.prepend(g)}else{if(j==="up"){g.prev().insertAfter(g)}else{if(j==="down"){g.next().insertBefore(g)}else{if(j==="bottom"){i.append(g)}}}}this.createList();return false},createList:function(){this.input.val(this.getElements().join(","))},onOpen:function(){return false},onAdd:function(){return false}};f.MedialistWidget=function(g){f.AbstractListWidget.call(this,g)};a(f.MedialistWidget,f.AbstractListWidget);f.MedialistWidget.prototype.onOpen=function(){f.openMediapool("detail",this.getSelected(),"slyMediaWidgetCallback");slyMediaWidgetCallback=e.proxy(this.addValue,this);return false};f.MedialistWidget.prototype.onAdd=function(){f.openMediapool("upload","","slyMediaWidgetCallback");slyMediaWidgetCallback=e.proxy(this.addValue,this);return false};f.LinklistWidget=function(g){f.AbstractListWidget.call(this,g)};a(f.LinklistWidget,f.AbstractListWidget);f.LinklistWidget.prototype.onOpen=function(){var g=this.element.data("catid");f.openLinkmap(g,"slyLinkWidgetCallback");slyLinkWidgetCallback=e.proxy(this.addValue,this);return false};f.disableLogin=function(h){var g=parseInt(h.html(),10)-1;h.html(g+"");if(g>0){setTimeout(f.disableLogin,1000,h)}else{e("div.rex-message p span").html(e("#loginformular").data("message"));e("#loginformular input:not(:hidden)").prop("disabled",false);e("#rex_user_login").focus()}};f.startLoginTimer=function(h){var g=e("div.rex-message p span strong");if(g.length==1){e("#loginformular input:not(:hidden)").prop("disabled",true);e("#loginformular").data("message",h);setTimeout(f.disableLogin,1000,g)}};var c=function(){var g=e("#userperm_cat_all").prop("checked");var h=e("#userperm_media_all").prop("checked");var i=e("#rex-page-user .sly-form .rex-form-wrapper .sly-num7");e("#userperm_cat").prop("disabled",g);e("#userperm_media").prop("disabled",h);if(g&&h){i.slideUp("slow")}else{i.slideDown("slow")}};e(function(){e(".sly-widget").each(function(){var l=e(this);if(l.is(".sly-link")){new f.LinkWidget(this)}else{if(l.is(".sly-media")){new f.MediaWidget(this)}else{if(l.is(".sly-linklist")){new f.LinklistWidget(this)}else{if(l.is(".sly-medialist")){new f.MedialistWidget(this)}}}}});e(".sly-check-all").click(function(){var l=e(this).data("target");e("input[name='"+l+"']").prop("checked",this.checked)});e("table.rex-table").delegate("a.sly-delete, input.sly-button-delete","click",function(){var m=e(this).parents("table");var l=m.attr("rel");if(!l){l="LÃ¶schen?"}return confirm(l)});e(".sly-table-extras-filter input[class^=filter_input_]").keyup(function(p){var n=e(this).attr("class"),m=n.replace("filter_input_",""),o=e("#"+m),q=p.keyCode;e("input."+n).val(e(this).val());p.preventDefault();if(q==8||q==46||q==109||q==189||(q>=65&&q<=90)||(q>=48&&q<=57)){var l=new RegExp(e(this).val(),"i");e("tbody tr",o).each(function(){var r=e(this);e("td",r).filter(function(){return l.test(e(this).text())}).length?r.show():r.hide()})}});e("a.sly-blank").attr("target","_blank");e("#rex-navi-page-mediapool a").click(function(){f.openMediapool();return false});if(e("#rex-form-login").length>0){e("#rex-form-login").focus();e("#javascript").val("1")}if(e("#rex-page-user .sly-form").length>0){var k=e("#rex-page-user .sly-form .rex-form-wrapper");var i=k.find(".sly-num6,.sly-num7");e("#is_admin").change(function(){if(e(this).is(":checked")){e("#userperm_module").prop("disabled",true);i.slideUp("slow")}else{e("#userperm_module").prop("disabled",false);i.slideDown("slow");c()}});c();e("#userperm_cat_all, #userperm_media_all").change(c);if(e("#is_admin").is(":checked")){e("#userperm_module").prop("disabled",true);i.hide()}if(e("#userperm_cat_all").is(":checked")&&e("#userperm_media_all").is(":checked")){k.find(".sly-num7").hide()}}e(".rex-form .sly-select-checkbox-list a").live("click",function(){var l=e(this).attr("rel");var m=e(this).parents("p").find(".rex-chckbx");m.prop("checked",l==="all");return false});if(typeof Modernizr!=="undefined"){var g=Modernizr.inputtypes;for(var h in g){if(g.hasOwnProperty(h)&&g[h]){e("input[type="+h+"]").addClass("ua-supported")}}}e("input[type=range]:not(.ua-supported)").each(function(){var l=e(this);var m=e("<div></div>").attr("id",l.attr("id")+"-slider");var n=e('<input type="hidden" value="" />');l.after(n);n.val(l.val()).attr("name",l.attr("name")).attr("id",l.attr("id"));l.after(m);m.addClass("sly-slider").slider({min:l.attr("min"),max:l.attr("max"),value:l.val(),change:function(o){n.val(m.slider("value"))}});l.remove()});e(".rex-form-row.sly-form-multilingual").each(function(){var p=e(this),n=p.is(":visible"),q=p.attr("rel"),o=n?' checked="checked"':"",m='<span class="sly-form-i18n-switch"><input type="checkbox" name="equal__'+q+'" id="equal__'+q+'" value="1"'+o+" /></span>";if(n){e("label:first",this).after(m)}else{var l=p.next("div.sly-form-i18n-container");e("label:first",l).after(m)}});var j=e(".sly-form-i18n-switch input[id^=equal__]");if(j.length>0){j.imgCheckbox("off.png","on.png","assets/form-i18n-switch-").next().click(function(){var p=e(this).prev("input"),o=!p[0].checked,q=p.attr("id").replace(/^equal__/,""),m=e('div[rel="'+q+'"]'),n=p.parent("span"),l=e("div.sly-form-i18n-container.c-"+q);if(o){m.hide();l.show();e("label:first",l).after(n)}else{m.show();l.hide();e("label:first",m).after(n)}})}e(".sly-module-select").change(function(){e(this).closest("form").submit()})})})(jQuery,sly);