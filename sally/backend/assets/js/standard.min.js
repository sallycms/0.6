var sly={};(function(e,b,g,c){var h=[];b.Popup=function(n,m,l,p,o,k,j){n+=(new Date()).getTime();this.name=n;this.url=m;this.obj=window.open(m,n,"width="+o+",height="+k+j);this.obj.moveTo(l,p);this.obj.focus();h[n]=this;this.close=function(){this.obj.close()};this.setGlobal=function(q,r){this.obj[q]=r}};b.closeAllPopups=function(){for(var j in h){if(h.hasOwnProperty(j)){h[j].close()}}};b.openCenteredPopup=function(m,o,n,l,k){if(n===0){n=550}if(l===0){l=400}if(k===c){k=",scrollbars=yes,toolbar=no,status=yes,resizable=yes"}var j=parseInt((screen.width-n)/2,10);var p=parseInt((screen.height-l)/2,10)-24;return new b.Popup(m,o,j,p,n,l,k)};b.openMediapool=function(k,l,m){var j="index.php?page=mediapool";if(l){j+="&subpage=detail&file_name="+l}else{if(k&&(k!="detail"||l)){j+="&subpage="+k}}if(m){j+="&callback="+m}return b.openCenteredPopup("slymediapool",j,760,600)};b.openLinkmap=function(k,l){var j="index.php?page=linkmap";if(k){j+="&category_id="+k}if(l){j+="&callback="+l}return b.openCenteredPopup("slylinkmap",j,760,600)};var f=function(l,k){var j=function(){};j.prototype=k.prototype;l.prototype=new j()};var d=function(j){return j+(new Date()).getTime()};b.AbstractWidget=function(k){this.element=e(k);this.valueInput=this.element.find("input[rel=value]");this.nameInput=this.element.find("input[rel=name]");var j=this.element.find(".sly-icons");j.delegate("a[rel=open]","click",e.proxy(this.onOpen,this));j.delegate("a[rel=add]","click",e.proxy(this.onAdd,this));j.delegate("a[rel=delete]","click",e.proxy(this.onDelete,this))};b.AbstractWidget.prototype={getValue:function(){return this.valueInput.val()},setValue:function(j,k){this.valueInput.val(j);this.nameInput.val(k);return true},clear:function(){this.setValue("","")},onOpen:function(){return false},onAdd:function(){return false},onDelete:function(){this.clear();return false}};b.MediaWidget=function(j){b.AbstractWidget.call(this,j)};f(b.MediaWidget,b.AbstractWidget);b.MediaWidget.prototype.onOpen=function(){var j=d("slymediawidget");b.openMediapool("detail",this.getValue(),j);g[j]=e.proxy(this.setValue,this);return false};b.MediaWidget.prototype.onAdd=function(){var j=d("slymediawidget");b.openMediapool("upload","",j);g[j]=e.proxy(this.setValue,this);return false};b.LinkWidget=function(j){b.AbstractWidget.call(this,j)};f(b.LinkWidget,b.AbstractWidget);b.LinkWidget.prototype.onOpen=function(){var k=this.element.data("catid"),j=d("slylinkwidget");b.openLinkmap(k,j);g[j]=e.proxy(this.setValue,this);return false};b.AbstractListWidget=function(k){this.element=e(k);this.input=this.element.find("input");this.list=this.element.find("select");var j=this.element.find(".sly-icons.move");j.delegate("a","click",e.proxy(this.onMove,this));j=this.element.find(".sly-icons.edit");j.delegate("a[rel=open]","click",e.proxy(this.onOpen,this));j.delegate("a[rel=add]","click",e.proxy(this.onAdd,this));j.delegate("a[rel=delete]","click",e.proxy(this.onDelete,this))};b.AbstractListWidget.prototype={getElements:function(){var l=this.list.find("option");var k=[];for(var m=0,j=l.length;m<j;++m){k.push(l[m].value)}return k},getSelected:function(){var j=this.list.find("option:selected");return j.length?j.val():null},clear:function(){this.list.find("option").remove();this.input.val("")},addValue:function(j,k){this.list.append(e("<option>").val(j).text(k));this.createList();return false},onDelete:function(){var k=this.list.find("option:selected");if(k.length===0){return false}var j=k.next();if(j.length===0){j=k.prev()}k.remove();j.prop("selected",true);this.createList();return false},onMove:function(k){var m=e(k.target).closest("a").attr("rel");var l=this.list;var j=l.find("option:selected");if(j.length===0){return false}if(m==="top"){l.prepend(j)}else{if(m==="up"){j.prev().insertAfter(j)}else{if(m==="down"){j.next().insertBefore(j)}else{if(m==="bottom"){l.append(j)}}}}this.createList();return false},createList:function(){this.input.val(this.getElements().join(","))},onOpen:function(){return false},onAdd:function(){return false}};b.MedialistWidget=function(j){b.AbstractListWidget.call(this,j)};f(b.MedialistWidget,b.AbstractListWidget);b.MedialistWidget.prototype.onOpen=function(){var j=d("slymedialistwidget");b.openMediapool("detail",this.getSelected(),j);g[j]=e.proxy(this.addValue,this);return false};b.MedialistWidget.prototype.onAdd=function(){var j=d("slymedialistwidget");b.openMediapool("upload","",j);g[j]=e.proxy(this.addValue,this);return false};b.LinklistWidget=function(j){b.AbstractListWidget.call(this,j)};f(b.LinklistWidget,b.AbstractListWidget);b.LinklistWidget.prototype.onOpen=function(){var k=this.element.data("catid"),j=d("slylinklistwidget");b.openLinkmap(k,j);g[j]=e.proxy(this.addValue,this);return false};b.disableLogin=function(k){var j=parseInt(k.html(),10)-1;k.html(j+"");if(j>0){setTimeout(b.disableLogin,1000,k)}else{e("div.rex-message p span").html(e("#loginformular").data("message"));e("#loginformular input:not(:hidden)").prop("disabled",false);e("#rex_user_login").focus()}};b.startLoginTimer=function(k){var j=e("div.rex-message p span strong");if(j.length==1){e("#loginformular input:not(:hidden)").prop("disabled",true);e("#loginformular").data("message",k);setTimeout(b.disableLogin,1000,j)}};b.setModernizrCookie=function(){if(typeof Modernizr==="undefined"){return false}var k=[];for(var m in Modernizr){if(Modernizr.hasOwnProperty(m)){var n=Modernizr[m];m='"'+m+'"';if(typeof n==="object"){var l=[];for(var j in n){l.push('"'+j+'":'+(n[j]?1:0))}k.push(m+":{"+l.join(",")+"}")}else{k.push(m+':"'+n+'"')}}}k="{"+k.join(",")+"}";document.cookie="sly_modernizr="+escape(k)};b.addDatepickerToggler=function(l,o){var k=l.attr("name");var j=e('<input type="hidden" value="" />').attr("name",(o===0?"":"_")+k);var m=e('<span class="sly-date-disabled" style="cursor:pointer">(&hellip;)</span>');var n=e('<input type="checkbox" value="1" class="sly-form-checkbox" />');m.click(function(){e(this).prevAll().click()});n.change(function(){var p=this.checked;l.toggle(p).attr("name",(p?"":"_")+k);m.toggle(!p);j.attr("name",(p?"_":"")+k)});l.before(n).after(j).after(m);if(o!==0){n.prop("checked",true);m.hide()}else{n.prop("checked",false);l.hide()}};var i=function(){var j=e("#userperm_cat_all").prop("checked");var k=e("#userperm_media_all").prop("checked");var l=e("#rex-page-user .sly-form .rex-form-wrapper .sly-num7");e("#userperm_cat").prop("disabled",j);e("#userperm_media").prop("disabled",k);if(j&&k){l.slideUp("slow")}else{l.slideDown("slow")}};var a=function(){var l=e("#is_admin").is(":checked");var k=e("#userperm_sprachen").val()?true:false;var n=e("#userperm_startpage");var j=n.find("option[value=structure]");var m=j.is(":selected");if(l||k){j.prop("disabled",false)}else{j.prop("disabled",true);if(m){n.find("option[value=profile]").prop("selected",true)}}};e(function(){e(".sly-widget").each(function(){var o=e(this);if(o.is(".sly-link")){new b.LinkWidget(this)}else{if(o.is(".sly-media")){new b.MediaWidget(this)}else{if(o.is(".sly-linklist")){new b.LinklistWidget(this)}else{if(o.is(".sly-medialist")){new b.MedialistWidget(this)}}}}});e(".sly-check-all").click(function(){var o=e(this).data("target");e("input[name='"+o+"']").prop("checked",this.checked)});e("table.rex-table").delegate("a.sly-delete, input.sly-button-delete","click",function(){var p=e(this).parents("table");var o=p.attr("rel");if(!o){o="LÃ¶schen?"}return confirm(o)});e(".sly-table-extras-filter input[class^=filter_input_]").keyup(function(s){var q=e(this).attr("class"),p=q.replace("filter_input_",""),r=e("#"+p),t=s.keyCode;e("input."+q).val(e(this).val());s.preventDefault();if(t==8||t==46||t==109||t==189||(t>=65&&t<=90)||(t>=48&&t<=57)){var o=new RegExp(e(this).val(),"i");e("tbody tr",r).each(function(){var u=e(this);e("td",u).filter(function(){return o.test(e(this).text())}).length?u.show():u.hide()})}});e("a.sly-blank").attr("target","_blank");e("#rex-navi-page-mediapool a").click(function(){b.openMediapool();return false});if(e("#rex-form-login").length>0){e("#rex-form-login").focus();e("#javascript").val("1")}if(e("#rex-page-user .sly-form").length>0){var n=e("#rex-page-user .sly-form .rex-form-wrapper");var l=n.find(".sly-num6,.sly-num7");e("#is_admin").change(function(){if(e(this).is(":checked")){e("#userperm_module").prop("disabled",true);l.slideUp("slow")}else{e("#userperm_module").prop("disabled",false);l.slideDown("slow");i()}});i();e("#userperm_cat_all, #userperm_media_all").change(i);if(e("#is_admin").is(":checked")){e("#userperm_module").prop("disabled",true);l.hide()}if(e("#userperm_cat_all").is(":checked")&&e("#userperm_media_all").is(":checked")){n.find(".sly-num7").hide()}a();e("#is_admin, #userperm_sprachen").change(a)}e(".sly-form .sly-select-checkbox-list a").live("click",function(){var o=e(this).attr("rel");var p=e(this).parents("p").find("input");p.prop("checked",o==="all");return false});if(typeof Modernizr!=="undefined"){var j=Modernizr.inputtypes;for(var k in j){if(j.hasOwnProperty(k)&&j[k]){e("input[type="+k+"]").addClass("ua-supported")}}}e("input[type=range]:not(.ua-supported)").each(function(){var o=e(this);var p=e("<div></div>").attr("id",o.attr("id")+"-slider");var q=e('<input type="hidden" value="" />');o.after(q);q.val(o.val()).attr("name",o.attr("name")).attr("id",o.attr("id"));o.after(p);p.addClass("sly-slider").slider({min:o.attr("min"),max:o.attr("max"),value:o.val(),change:function(r){q.val(p.slider("value"))}});o.remove()});e(".rex-form-row.sly-form-multilingual").each(function(){var s=e(this),q=s.is(":visible"),t=s.attr("rel"),r=q?' checked="checked"':"",p='<span class="sly-form-i18n-switch"><input type="checkbox" name="equal__'+t+'" id="equal__'+t+'" value="1"'+r+" /></span>";if(q){e("label:first",this).after(p)}else{var o=s.next("div.sly-form-i18n-container");e("label:first",o).after(p)}});var m=e(".sly-form-i18n-switch input[id^=equal__]");if(m.length>0){m.imgCheckbox("off.png","on.png","assets/form-i18n-switch-").next().click(function(){var s=e(this).prev("input"),r=!s[0].checked,t=s.attr("id").replace(/^equal__/,""),p=e('div[rel="'+t+'"]'),q=s.parent("span"),o=e("div.sly-form-i18n-container.c-"+t);if(r){p.hide();o.show();e("label:first",o).after(q)}else{p.show();o.hide();e("label:first",p).after(q)}})}e(".sly-module-select").change(function(){e(this).closest("form").submit()})})})(jQuery,sly,window);