var sly={};(function(a,b,c,d){var e=[];b.Popup=function(a,b,c,d,f,g,h){var i=navigator.userAgent;a+=(new Date).getTime(),this.name=a,this.url=b,this.obj=window.open(b,a,"width="+f+",height="+g+h),i.indexOf("Chrome/18.")===-1&&i.indexOf("Chrome/20.")===-1&&(this.obj.moveTo(c,d),this.obj.focus()),e[a]=this,this.close=function(){this.obj.close()},this.setGlobal=function(a,b){this.obj[a]=b}},b.closeAllPopups=function(){for(var a in e)e.hasOwnProperty(a)&&e[a].close()},b.openCenteredPopup=function(a,c,e,f,g){e===0&&(e=550),f===0&&(f=400),g===d&&(g=",scrollbars=yes,toolbar=no,status=yes,resizable=yes");var h=parseInt((screen.width-e)/2,10),i=parseInt((screen.height-f)/2,10)-24;return new b.Popup(a,c,h,i,e,f,g)},b.openMediapool=function(c,d,e,f,g){var h="index.php?page=mediapool";return d?h+="_detail&file_name="+d:c&&(c!="detail"||d)&&(h+="_"+c),e&&(h+="&callback="+e),a.isArray(f)&&f.length>0&&(h+="&args[types]="+f.join("|")),a.isArray(g)&&g.length>0&&(h+="&args[categories]="+g.join("|")),b.openCenteredPopup("slymediapool",h,760,600)},b.openLinkmap=function(c,d,e,f){var g="index.php?page=linkmap";return c&&(g+="&category_id="+c),d&&(g+="&callback="+d),a.isArray(e)&&e.length>0&&(g+="&args[types]="+e.join("|")),a.isArray(f)&&f.length>0&&(g+="&args[categories]="+f.join("|")),b.openCenteredPopup("slylinkmap",g,760,600)},b.inherit=function(a,b){var c=function(){};c.prototype=b.prototype,a.prototype=new c};var f=function(a){return a+(new Date).getTime()},g=function(a,b){var c=((a.data(b)||"")+"").split("|"),d=c.length,e=0,f=[];for(;e<d;++e)c[e].length>0&&f.push(c[e]);return f};b.AbstractWidget=function(b){this.element=a(b),this.valueInput=this.element.find("input.value"),this.nameInput=this.element.find("input.name");var c=this.element.find(".sly-icons");c.delegate("a.fct-open","click",a.proxy(this.onOpen,this)),c.delegate("a.fct-add","click",a.proxy(this.onAdd,this)),c.delegate("a.fct-delete","click",a.proxy(this.onDelete,this))},b.AbstractWidget.prototype={getValue:function(){return this.valueInput.val()},setValue:function(a,b){return this.valueInput.val(a),this.nameInput.val(b),this.valueInput.change(),!0},clear:function(){this.setValue("","")},onOpen:function(){return!1},onAdd:function(){return!1},onDelete:function(){return this.clear(),!1}},b.MediaWidget=function(a){b.AbstractWidget.call(this,a),this.filetypes=g(this.element,"filetypes"),this.categories=g(this.element,"categories")},b.inherit(b.MediaWidget,b.AbstractWidget),b.MediaWidget.prototype.onOpen=function(){var d=f("slymediawidget");return b.openMediapool("detail",this.getValue(),d,this.filetypes,this.categories),c[d]=a.proxy(this.setValue,this),!1},b.MediaWidget.prototype.onAdd=function(){var d=f("slymediawidget");return b.openMediapool("upload","",d,this.filetypes,this.categories),c[d]=a.proxy(this.setValue,this),!1},b.LinkWidget=function(a){b.AbstractWidget.call(this,a),this.articletypes=g(this.element,"articletypes"),this.categories=g(this.element,"categories")},b.inherit(b.LinkWidget,b.AbstractWidget),b.LinkWidget.prototype.onOpen=function(){var d=this.element.data("catid"),e=f("slylinkwidget");return b.openLinkmap(d,e,this.articletypes,this.categories),c[e]=a.proxy(this.setValue,this),!1},b.AbstractListWidget=function(b){this.element=a(b),this.input=this.element.find("input[type=hidden]"),this.list=this.element.find("select"),this.min=this.element.data("min")||0,this.max=this.element.data("max")||-1;var c=this.element.find(".sly-icons.move");c.delegate("a","click",a.proxy(this.onMove,this)),c=this.element.find(".sly-icons.edit"),c.delegate("a.fct-open","click",a.proxy(this.onOpen,this)),c.delegate("a.fct-add","click",a.proxy(this.onAdd,this)),c.delegate("a.fct-delete","click",a.proxy(this.onDelete,this))},b.AbstractListWidget.prototype={getElements:function(){var a=this.list.find("option"),b=[];for(var c=0,d=a.length;c<d;++c)b.push(a[c].value);return b},getCount:function(){return this.list.find("option").length},getSelected:function(){var a=this.list.find("option:selected");return a.length?a.val():null},clear:function(){this.list.find("option").remove(),this.input.val("").change()},addValue:function(b,c){var d=this.getCount(),e=this.max;if(d===e)return!0;this.list.append(a("<option>").val(b).text(c)),this.createList();var f=d+1===e;return f&&this.element.addClass("at-max"),this.element.toggleClass("at-min",d+1<=this.min),f},onDelete:function(){var a=this.list.find("option:selected");if(a.length===0)return!1;var b=this.getCount()-this.min;if(b===0)return!1;a=a.slice(0,b);var c=a.next();return c.length===0&&(c=a.prev()),a.remove(),c.prop("selected",!0),this.element.removeClass("at-max").toggleClass("at-min",this.getCount()===this.min),this.createList(),!1},onMove:function(a){var b=a.target.className.replace("fct-",""),c=this.list,d=c.find("option:selected");return d.length===0?!1:(b==="top"?c.prepend(d):b==="up"?d.prev().insertAfter(d):b==="down"?d.next().insertBefore(d):b==="bottom"&&c.append(d),this.createList(),!1)},createList:function(){this.input.val(this.getElements().join(",")).change()},onOpen:function(){return!1},onAdd:function(){return!1}},b.MedialistWidget=function(a){b.AbstractListWidget.call(this,a),this.filetypes=g(this.element,"filetypes"),this.categories=g(this.element,"categories")},b.inherit(b.MedialistWidget,b.AbstractListWidget),b.MedialistWidget.prototype.onOpen=function(){if(this.getCount()===this.max)return!1;var d=f("slymedialistwidget");return b.openMediapool("detail",this.getSelected(),d,this.filetypes,this.categories),c[d]=a.proxy(this.addValue,this),!1},b.MedialistWidget.prototype.onAdd=function(){if(this.getCount()===this.max)return!1;var d=f("slymedialistwidget");return b.openMediapool("upload","",d,this.filetypes,this.categories),c[d]=a.proxy(this.addValue,this),!1},b.LinklistWidget=function(a){b.AbstractListWidget.call(this,a),this.articletypes=g(this.element,"articletypes"),this.categories=g(this.element,"categories")},b.inherit(b.LinklistWidget,b.AbstractListWidget),b.LinklistWidget.prototype.onOpen=function(){if(this.getCount()===this.max)return!1;var d=this.element.data("catid"),e=f("slylinklistwidget");return b.openLinkmap(d,e,this.articletypes,this.categories),c[e]=a.proxy(this.addValue,this),!1},b.disableLogin=function(c){var d=parseInt(c.html(),10)-1;c.html(d+""),d>0?setTimeout(b.disableLogin,1e3,c):(a("div.sly-message p span").html(a("#sly_login_form").data("message")),a("#sly_login_form input:not(:hidden)").prop("disabled",!1))},b.startLoginTimer=function(c){var d=a("div.sly-message p span strong");d.length==1&&(a("#sly_login_form input:not(:hidden)").prop("disabled",!0),a("#sly_login_form").data("message",c),setTimeout(b.disableLogin,1e3,d))},b.setModernizrCookie=function(){if(typeof Modernizr=="undefined")return!1;var a=Modernizr,b=JSON.parse(JSON.stringify(a)),c;b.audio={},b.video={};for(c in a.audio)b.audio[c]=a.audio[c];for(c in a.video)b.video[c]=a.video[c];b._version=d,b._prefixes=d,b._domPrefixes=d,b._cssomPrefixes=d,document.cookie="sly_modernizr="+escape(JSON.stringify(b))},b.addDatepickerToggler=function(b,c){var d=b.attr("name"),e=a('<input type="hidden" value="" />').attr("name",(c===0?"":"_")+d),f=a('<span class="sly-date-disabled" style="cursor:pointer">(&hellip;)</span>'),g=a('<input type="checkbox" value="1" class="sly-form-checkbox" />');f.click(function(){a(this).prevAll().click()}),g.change(function(){var a=this.checked;b.toggle(a).attr("name",(a?"":"_")+d),f.toggle(!a),e.attr("name",(a?"_":"")+d)}),b.before(g).after(e).after(f),c!==0?(g.prop("checked",!0),f.hide()):(g.prop("checked",!1),b.hide())},b.initWidgets=function(c){a(".sly-widget:not(.sly-initialized)",c).each(function(){var c=a(this),d=!1;c.is(".sly-link")?(new b.LinkWidget(this),d=!0):c.is(".sly-media")?(new b.MediaWidget(this),d=!0):c.is(".sly-linklist")?(new b.LinklistWidget(this),d=!0):c.is(".sly-medialist")&&(new b.MedialistWidget(this),d=!0),d&&c.addClass("sly-initialized")})},a(function(){b.initWidgets(),a(".sly-check-all").click(function(){var b=a(this).data("target");a("input[name='"+b+"']").prop("checked",this.checked)}),a("a.sly-delete, input.sly-button-delete").click(function(){return confirm("Sicher?")}),a("a.sly-confirm-me").click(function(){return confirm("Sicher?")}),a(".sly-table-extras-filter input[class*=filter_input_]").keyup(function(b){var c=a(this).attr("class"),d=c.match(/filter_input_([a-zA-Z0-9-_]+)/)[1],e=a("#"+d),f=b.keyCode;a("input."+c).val(a(this).val()),b.preventDefault();if(f==8||f==46||f==109||f==189||f>=65&&f<=90||f>=48&&f<=57){var g=new RegExp(a(this).val(),"i");a("tbody tr",e).each(function(){var b=a(this);a("td",b).filter(function(){return g.test(a(this).text())}).length?b.show():b.hide()})}}),a("a.sly-blank").attr("target","_blank"),a("#sly-navi-page-mediapool a").click(function(){return b.openMediapool(),!1}),a(".sly-form .sly-select-checkbox-list a").live("click",function(){var b=a(this).attr("rel"),c=a(this).closest("div").find("input");return c.prop("checked",b==="all"),!1});if(typeof Modernizr!="undefined"){var c=Modernizr.inputtypes;for(var d in c)c.hasOwnProperty(d)&&c[d]&&a("input[type="+d+"]").addClass("ua-supported");Modernizr.input.autofocus||a("*[autofocus]").focus()}a("input[type=range]:not(.ua-supported)").each(function(){var b=a(this),c=a("<div></div>").attr("id",b.attr("id")+"-slider"),d=a('<input type="hidden" value="" />');b.after(d),d.val(b.val()).attr("name",b.attr("name")).attr("id",b.attr("id")),b.after(c),c.addClass("sly-slider").slider({min:b.attr("min"),max:b.attr("max"),value:b.val(),change:function(a){d.val(c.slider("value"))}}),b.remove()});if(typeof a.fn.chosen!="undefined"){var e=a("select:not(.sly-no-chosen) option"),f=e.length,g=0,h,i;for(;g<f;++g)i=a(e[g]),h=i.html().match(/^(&nbsp;)*/)[0].length/6,h>0&&i.addClass("sly-lvl-"+h).html(i.html().substr(h*6));a(".sly-form-select:not(.sly-no-chosen)").data("placeholder","Bitte ausw√§hlen").chosen()}a(".sly-form-row.sly-form-multilingual").each(function(){var b=a(this),c=b.is(":visible"),d=b.attr("rel"),e=c?' checked="checked"':"",f='<span class="sly-form-i18n-switch"><input type="checkbox" name="equal__'+d+'" id="equal__'+d+'" value="1"'+e+" /></span>";if(c)a("label:first",this).after(f);else{var g=b.next("div.sly-form-i18n-container");a("label:first",g).after(f)}});var j=a(".sly-form-i18n-switch input[id^=equal__]");j.length>0&&j.imgCheckbox("off.png","on.png","assets/form-i18n-switch-").next().click(function(){var b=a(this).prev("input"),c=!b[0].checked,d=b.attr("id").replace(/^equal__/,""),e=a('div[rel="'+d+'"]'),f=b.parent("span"),g=a("div.sly-form-i18n-container.c-"+d);c?(e.hide(),g.show(),a("label:first",g).after(f)):(e.show(),g.hide(),a("label:first",e).after(f))}),a(".sly-module-select").change(function(){a(this).closest("form").submit()}),a("#sly-system-toggle-cache").click(function(){return a("#sly-form-system-caches p").slideToggle(),!1});var k=null;a("#sly-page-addon .sly-addonlist").delegate("a:not(.sly-blank)","click",function(){var b=a(this),c=a(".sly-addonlist"),d=a(".component",c),e=b.closest(".component"),f=a(".error",c);f.hide(),k&&window.clearTimeout(k),d.prepend('<div class="blocker"></div>'),e.addClass("working");var g=function(b){for(var c in b){if(!b.hasOwnProperty(c))continue;var d=b[c],e=a('.component[data-key="'+c+'"]');e.attr("class",d.classes+" component"),a(".deps",e).html(d.deps)}};return a.ajax({url:b.attr("href")+"&json=1",cache:!1,dataType:"json",type:"POST",success:function(b){g(b.stati),e.removeClass("working"),a(".blocker").remove(),b.status!==!0&&(e.after(f),a("span",f).html(b.message),f.show(),k=window.setTimeout(function(){f.slideUp()},1e4))}}),!1}),a("body.sly-popup").unload(b.closeAllPopups)})})(jQuery,sly,window);