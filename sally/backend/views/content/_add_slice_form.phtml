<?php
/*
 * Copyright (c) 2011, webvariants GbR, http://www.webvariants.de
 *
 * This file is released under the terms of the MIT license. You can find the
 * complete text in the attached LICENSE file or online at:
 *
 * http://www.opensource.org/licenses/mit-license.php
 */

$user = sly_Util_User::getCurrentUser();

$moduleSelect = new sly_Form_Select_DropDown('add_module', '', '', array(), 'module'.$prior);
$moduleSelect->addClass('sly-module-select');
$moduleSelect->addValue('', '---------------------------- '.t('add_block'));

foreach ($modules as $module => $moduleTitle) {
	if ($user->isAdmin() || $user->hasRight('module', 'add', $module)) {
		$moduleSelect->addValue($module, rex_translate($moduleTitle, null, false));
	}
}

$formID = 'slice'.$prior;

$form = new sly_Form('index.php#slice'.$prior, 'GET', t('add_block'), $formID, $formID);
$form->addClass('sly-form-add-slice');
$form->addHiddenValue('page', 'content');
$form->addHiddenValue('article_id', $article->getId());
$form->addHiddenValue('clang', $article->getClang());
$form->addHiddenValue('prior', $prior);
$form->addHiddenValue('function', 'add');
$form->addHiddenValue('slot', $slot);

$form->add($moduleSelect);
$form->setSubmitButton(null);
$form->setResetButton(null);
print $form->render();
