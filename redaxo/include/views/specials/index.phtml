<?php

global $REX, $I18N;

if (!empty($this->warning)) print rex_warning($this->warning);
if (!empty($this->info))    print rex_info($this->info);

$sel_lang = new rex_select();
$sel_lang->setStyle('class="rex-form-select"');
$sel_lang->setName('backend_locale');
$sel_lang->setId('rex-form-lang');
$sel_lang->setSize(1);
$sel_lang->setSelected($REX['LANG']);

foreach ($REX['LOCALES'] as $l) {
	$sel_lang->addOption($l, $l);
}

$sel_mod_rewrite = new rex_select();
$sel_mod_rewrite->setSize(1);
$sel_mod_rewrite->setStyle('class="rex-form-select"');
$sel_mod_rewrite->setName('mod_rewrite');
$sel_mod_rewrite->setId('rex-form-mod-rewrite');
$sel_mod_rewrite->setSelected($REX['MOD_REWRITE'] === false ? 'FALSE' : 'TRUE');

$sel_mod_rewrite->addOption('aktiviert', 'TRUE');
$sel_mod_rewrite->addOption('deaktiviert', 'FALSE');

?>

<div class="rex-form" id="rex-form-system-setup">
	<form action="index.php" method="post">
		<div class="hidden">
			<input type="hidden" name="page" value="specials" />
			<input type="hidden" name="func" value="update" />
		</div>

		<div class="rex-area-col-2">
			<div class="rex-area-col-a">

				<h3 class="rex-hl2"><?= $I18N->msg('specials_features') ?></h3>

				<div class="rex-area-content">
					<h4 class="rex-hl3"><?= $I18N->msg('delete_cache') ?></h4>
					<p class="rex-tx1"><?= $I18N->msg('delete_cache_description') ?></p>
					<p class="rex-button"><a class="rex-button" href="index.php?page=specials&amp;func=clearcache"><?= $I18N->msg('delete_cache') ?></a></p>

					<h4 class="rex-hl3"><?= $I18N->msg('setup') ?></h4>
					<p class="rex-tx1"><?= $I18N->msg('setup_text') ?></p>
					<p class="rex-button"><a class="rex-button" href="index.php?page=specials&amp;func=setup" onclick="return confirm(\'<?= $I18N->msg('setup') ?>?\');"><?= $I18N->msg('setup') ?></a></p>

					<h4 class="rex-hl3"><?= $I18N->msg('version') ?></h4>
					<p class="rex-tx1">SallyCMS <?= $REX['VERSION'] ?>.<?= $REX['SUBVERSION'] ?>.<?= $REX['MINORVERSION'] ?></p>

					<h4 class="rex-hl3"><?= $I18N->msg('database') ?></h4>
					<p class="rex-tx1"><?= $I18N->msg('name') ?>: <?= sly_html($REX['DB']['1']['NAME']) ?><br /><?= $I18N->msg('host') ?>: <?= sly_html($REX['DB']['1']['HOST']) ?></p>
				</div>
			</div>

			<div class="rex-area-col-b">
				<h3 class="rex-hl2"><?= $I18N->msg('specials_settings') ?></h3>

				<div class="rex-area-content">

					<fieldset class="rex-form-col-1">
					<legend><?= $I18N->msg('general_info_header') ?></legend>

					<div class="rex-form-wrapper">
						<div class="rex-form-row">
							<p class="rex-form-col-a rex-form-text">
								<label for="rex-form-server">$REX['SERVER']</label>
								<input class="rex-form-text" type="text" id="rex-form-server" name="server" value="<?= sly_html($REX['SERVER']) ?>" />
							</p>
						</div>

						<div class="rex-form-row">
							<p class="rex-form-col-a rex-form-text">
								<label for="rex-form-servername">$REX['SERVERNAME']</label>
								<input class="rex-form-text" type="text" id="rex-form-servername" name="servername" value="<?= sly_html($REX['SERVERNAME']) ?>" />
							</p>
						</div>

						<div class="rex-form-row">
							<p class="rex-form-col-a rex-form-read">
								<label for="rex_include_path">$REX['INCLUDE_PATH']</label>
								<span class="rex-form-read" id="rex_include_path" title=" <?= $REX['INCLUDE_PATH']  ?>">
								<?
								$tmp = $REX['INCLUDE_PATH'];
								
								// Mitte entfernen, wenn zu lang
								
								if (strlen($REX['INCLUDE_PATH']) > 24) {
									$tmp = substr($tmp, 0, 8).'&hellip;'.substr($tmp, strlen($tmp) - 10);
								}

								print $tmp;
								?></span>
							</p>
						</div>

						<div class="rex-form-row">
							<p class="rex-form-col-a rex-form-text">
								<label for="rex-form-error-email">$REX['ERROR_EMAIL']</label>
								<input class="rex-form-text" type="text" id="rex-form-error-email" name="error_email" value="<?= sly_html($REX['ERROR_EMAIL']) ?>" />
							</p>
						</div>

						<div class="rex-form-row">
							<p class="rex-form-col-a rex-form-text">
								<label for="rex-form-startarticle-id">$REX['START_ARTICLE_ID']</label>
								<input class="rex-form-text" type="text" id="rex-form-startarticle-id" name="start_article" value="<?= sly_html($REX['START_ARTICLE_ID']) ?>" />
							</p>
						</div>

						<div class="rex-form-row">
							<p class="rex-form-col-a rex-form-text">
								<label for="rex-form-notfound-article-id">$REX['NOTFOUND_ARTICLE_ID']</label>
								<input class="rex-form-text" type="text" id="rex-form-notfound-article-id" name="notfound_article" value="<?= sly_html($REX['NOTFOUND_ARTICLE_ID']) ?>" />
							</p>
						</div>

						<div class="rex-form-row">
							<p class="rex-form-col-a rex-form-text">
								<label for="rex-form-default-template-id">$REX['DEFAULT_TEMPLATE_ID']</label>
								<input class="rex-form-text" type="text" id="rex-form-default-template-id" name="default_template_id" value="<?= sly_html($REX['DEFAULT_TEMPLATE_ID']) ?>" />
							</p>
						</div>

						<div class="rex-form-row">
							<p class="rex-form-col-a rex-form-select">
								<label for="rex-form-lang">$REX['LANG']</label>
								<?= $sel_lang->get() ?>
							</p>
						</div>

						<div class="rex-form-row">
							<p class="rex-form-col-a rex-form-select">
								<label for="rex-form-mod-rewrite">$REX['MOD_REWRITE']</label>
								<?= $sel_mod_rewrite->get() ?>
							</p>
						</div>

						<div class="rex-form-row">
							<p class="rex-form-col-a rex-form-submit">
								<input type="submit" class="rex-form-submit" name="sendit" value="<?= $I18N->msg('specials_update') ?>" />
							</p>
						</div>
					</div>
					</fieldset>
				</div> <!-- Ende rex-area-content //-->
			</div> <!-- Ende rex-area-col-b //-->
		</div> <!-- Ende rex-area-col-2 //-->
	</form>
</div>
